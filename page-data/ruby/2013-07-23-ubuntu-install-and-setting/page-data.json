{"componentChunkName":"component---src-templates-blog-post-js","path":"/ruby/2013-07-23-ubuntu-install-and-setting/","result":{"data":{"site":{"siteMetadata":{"title":"Wlon X Blog"}},"markdownRemark":{"id":"e6b08cf8-9dcc-5477-b917-b52b6a291778","excerpt":"本文主要记录自己在西部数码 VPS 安装 ubuntu 的过程 添加 root 用户  这个命令可以创建 Home 目录和 Shell 路径， 则不会自动创建 Home 目录 Ubuntu 重启不能进入 VPS 原因：查看 /boot/grub/grub.cfg 正是被这个-…","html":"<p>本文主要记录自己在西部数码 VPS 安装 ubuntu 的过程</p>\n<h3>添加 root 用户</h3>\n<p><code class=\"language-text\">#adduser user</code> 这个命令可以创建 Home 目录和 Shell 路径，<code class=\"language-text\">useradd</code> 则不会自动创建 Home 目录</p>\n<h3>Ubuntu 重启不能进入 VPS</h3>\n<p>原因：查看 /boot/grub/grub.cfg</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">if [ &quot;${recordfail}&quot; = 1 ]; then\r\nset timeout=-1\r\nelse\r\nset timeout=2</code></pre></div>\n<p>正是被这个-1 给停留到启动界面的</p>\n<p>解决办法：\r\n先将/boot/grub/grub.cfg 默认只读修改为可写入\r\ncd /boot/grub\r\nchmod 644 grub.cfg 修改成 root 用户可写</p>\n<p>然后\r\nvi /boot/grub/grub.cfg 找到 timeout</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">if [ &quot;${recordfail}&quot; = 1 ]; then\r\nset timeout=-1  改为 0</code></pre></div>\n<h3>国内镜像</h3>\n<p>以 Precise(12.04)为例, 编辑/etc/apt/sources.list 文件, 在文件最前面添加以下条目(操作前请做好相应备份)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">deb http://mirrors.163.com/ubuntu/ precise main restricted universe multiverse\r\ndeb http://mirrors.163.com/ubuntu/ precise-security main restricted universe multiverse\r\ndeb http://mirrors.163.com/ubuntu/ precise-updates main restricted universe multiverse\r\ndeb http://mirrors.163.com/ubuntu/ precise-proposed main restricted universe multiverse\r\ndeb http://mirrors.163.com/ubuntu/ precise-backports main restricted universe multiverse\r\ndeb-src http://mirrors.163.com/ubuntu/ precise main restricted universe multiverse\r\ndeb-src http://mirrors.163.com/ubuntu/ precise-security main restricted universe multiverse\r\ndeb-src http://mirrors.163.com/ubuntu/ precise-updates main restricted universe multiverse\r\ndeb-src http://mirrors.163.com/ubuntu/ precise-proposed main restricted universe multiverse\r\ndeb-src http://mirrors.163.com/ubuntu/ precise-backports main restricted universe multiverse</code></pre></div>\n<h3>DNS 配置</h3>\n<p>修改以下配置，然后重启 <code class=\"language-text\">shutdown -r now</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/etc/network/interfaces\r\ndns-nameservers 8.8.8.8</code></pre></div>\n<h3>更新系统</h3>\n<h3>MySQL 安装配置</h3>\n<h3>禁止 root 用户 ssh 登录</h3>","frontmatter":{"title":"Ubuntu 安装配置","date":"July 23, 2013","description":""}}},"pageContext":{"slug":"/ruby/2013-07-23-ubuntu-install-and-setting/","previous":{"fields":{"slug":"/ruby/2013-03-17-nginx-use-rewrite-to-redirect/"},"frontmatter":{"title":"Nginx 用地址重写进行地址重定向"}},"next":{"fields":{"slug":"/ruby/2014-03-10-git-ignore-a-exist-local-file-change-but-do-not-delete-the-from-the-source-control/"},"frontmatter":{"title":"Git 不提交已存在版本控制的本地修改"}}}},"staticQueryHashes":["2955840356","3316101980"]}